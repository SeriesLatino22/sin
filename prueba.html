<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Video Playlist MOD Xavier Suarez</title>
  <!-- Responsive viewport -->
  <meta content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'
    name='viewport' />
  <link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    integrity="sha512-xxxxx" crossorigin="anonymous" />
  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      text-transform: capitalize;
    }

    body {
      background: #000;
    }

    .heading {
      color: #444;
      font-size: 40px;
      text-align: center;
      padding: 10px;
    }

    .container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 15px;
      align-items: flex-start;
      padding: 5px 5%;
    }

    .container .main-video {
      background: #151515;
      border-radius: 5px;
      padding: 10px;
      position: sticky;
      top: 0;
    }

    .container .main-video video {
      width: 100%;
      border-radius: 5px;
    }

    .container .main-video .title {
      color: #fff;
      font-size: 23px;
      padding-top: 15px;
      padding-bottom: 15px;
    }

    .container .video-list {
      background: #151515;
      border-radius: 5px;
      height: 582px;
      overflow-y: scroll;
    }

    .container .video-list::-webkit-scrollbar {
      width: 7px;
    }

    .container .video-list::-webkit-scrollbar-track {
      background: #ccc;
      border-radius: 50px;
    }

    .container .video-list::-webkit-scrollbar-thumb {
      background: #666;
      border-radius: 50px;
    }

    .container .video-list .vid video {
      width: 100px;
      border-radius: 5px;
    }

    .container .video-list .vid {
      background: #f7f7f7;
      display: flex;
      align-items: center;
      gap: 15px;
      border-radius: 5px;
      margin: 10px;
      padding: 10px;
      border: 1px solid rgba(0, 0, 0, .1);
      cursor: pointer;
    }

    .container .video-list .vid:hover {
      background: #eee;
    }

    .container .video-list .vid.active {
      background: #2980b9;
    }

    .container .video-list .vid.active .title {
      color: #fff;
    }

    .container .video-list .vid .title {
      color: #333;
      font-size: 17px;
    }

    @media (max-width: 991px) {
      .container {
        grid-template-columns: 1.5fr 1fr;
        padding: 10px;
      }
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
    }

    .scroll-button {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 40px;
      height: 40px;
      background-color: #ffffff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    .scroll-button img {
      width: 24px;
      height: 24px;
    }
  </style>
</head>

<body>
  <div class="scroll-button" id="scroll-button">
    <img
      src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1DCheRLhxDOU0Sie97vrJsc51LTLNJxKz-MhA-jVCRI_d8jsofkIenFjSDW7D8d5EvKU&usqp=CAU"
      alt="Flecha hacia abajo">
  </div>

  <div class="container">
    <div class="main-video">
      <div class="video">
        <video class='js-player' poster="https://media.discordapp.net/attachments/1000156875129634857/1002018284067102811/dcPc6esbABSljhnPuYxw7qJzhzq.jpg"
          controls muted autoplay>
          <source
            src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=cf87a71b53afe0830f919678626f4b64e97ed2fb&amp;st.mq=2&amp;st.mvid=5296999959293&amp;st.ip=186.30.7.42&amp;st.dla=on&amp;st.exp=1687651883376&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=7373"
            type="application/x-mpegURL">
        </video>
        <!--<video src="http://vods.tuxchannel.tv:80/series/dragon%20ball/episodio%20001.mkv" poster="https://media.discordapp.net/attachments/1000156875129634857/1002018284067102811/dcPc6esbABSljhnPuYxw7qJzhzq.jpg" controls muted autoplay></video>-->
        <h3 class="title">Capitulo 1x1</h3>
      </div>
    </div>
    <div class="video-list">
      <div class="vid active">
        <video src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=447748df7249d68372089d3f8c2c750b73b7235b&amp;st.mq=5&amp;st.mvid=5467125451269&amp;st.ip=186.155.103.151&amp;st.dla=off&amp;st.exp=1687756017884&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=4040"
          muted poster="https://media.discordapp.net/attachments/1000156875129634857/1002017994488156201/yXggMemopUDHwPgmi6X9Wh2BQra.jpg"></video>
        <h3 class="title">Capitulo 1</h3>
      </div>
      <div class="vid active">
        <video src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=2fa655a1ed5107abef4db7167c4c1a1ad6f15277&amp;st.mq=5&amp;st.mvid=5467125778949&amp;st.ip=186.155.103.151&amp;st.dla=off&amp;st.exp=1687756069810&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=9416"
          muted poster="https://media.discordapp.net/attachments/1000156875129634857/1002017994488156201/yXggMemopUDHwPgmi6X9Wh2BQra.jpg"></video>
        <h3 class="title">Capitulo 2</h3>
      </div>
    </div>
  </div>

  <!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/video.js@7.14.3/dist/video.min.js"></script>
  <script src="https://cdn.plyr.io/3.6.12/plyr.min.js"></script>
  <script>
    // Obtener referencias a los elementos relevantes
    const scrollButton = document.getElementById('scroll-button');
    const videoList = document.querySelector('.video-list');

    // Función para desplazarse hasta el final de la lista de capítulos
    function scrollToBottom() {
      const lastVideo = videoList.lastElementChild;
      lastVideo.scrollIntoView({ behavior: 'smooth' });
    }

    // Función para desplazarse hasta la parte superior de la lista de capítulos
    function scrollToTop() {
      videoList.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Actualizar el botón y su estilo cuando se desplaza la lista de videos
    function updateScrollButton() {
      const isScrolledToBottom = videoList.scrollHeight - videoList.scrollTop === videoList.clientHeight;
      if (isScrolledToBottom) {
        scrollButton.classList.add('up');
      } else {
        scrollButton.classList.remove('up');
      }
    }

    // Agregar eventos de clic al botón de desplazamiento
    scrollButton.addEventListener('click', () => {
      if (scrollButton.classList.contains('up')) {
        scrollToTop();
      } else {
        scrollToBottom();
      }
    });

    // Agregar evento de desplazamiento a la lista de videos
    videoList.addEventListener('scroll', updateScrollButton);

    // Actualizar el botón y su estilo al cargar la página
    updateScrollButton();

    // Obtener referencias a los elementos del reproductor de video
    const mainVideo = document.querySelector('.main-video video');
    const listVideo = document.querySelectorAll('.video-list .vid video');

    // Función para guardar la posición actual del video en el almacenamiento local
    function saveCurrentTime() {
      localStorage.setItem('videoCurrentTime', mainVideo.currentTime);
    }

    // Función para cargar la posición guardada del video desde el almacenamiento local
    function loadCurrentTime() {
      const currentTime = localStorage.getItem('videoCurrentTime');
      if (currentTime) {
        mainVideo.currentTime = currentTime;
      }
    }

    // Agregar eventos de clic a los videos de la lista
    listVideo.forEach(video => {
      video.addEventListener('click', () => {
        listVideo.forEach(vid => vid.parentElement.classList.remove('active'));
        video.parentElement.classList.add('active');
        mainVideo.src = video.src;
        mainVideo.poster = video.poster;
        mainVideo.play();
        saveCurrentTime();
      });
    });

    // Cargar la posición guardada del video al cargar la página
    loadCurrentTime();

    // Inicializar el reproductor de video con Plyr
    const player = new Plyr('.js-player');
  </script>
</body>

</html>

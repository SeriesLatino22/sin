<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Video Playlist MOD Xavier Suarez</title>
  <link rel="stylesheet" href="https://unpkg.com/video.js/dist/video-js.css">
</head>
<body>
  <div class="container">
    <div class="main-video">
      <video id="main-video" class="video-js vjs-default-skin" controls muted autoplay>
        <source src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=cf87a71b53afe0830f919678626f4b64e97ed2fb&amp;st.mq=2&amp;st.mvid=5296999959293&amp;st.ip=186.30.7.42&amp;st.dla=on&amp;st.exp=1687651883376&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=7373" type="application/x-mpegURL">
      </video>
      <h3 class="title">Capitulo 1x1</h3>
    </div>
    <div class="video-list">
      <div class="vid active">
        <video class="video-js vjs-default-skin" controls muted>
          <source src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=447748df7249d68372089d3f8c2c750b73b7235b&amp;st.mq=5&amp;st.mvid=5467125451269&amp;st.ip=186.155.103.151&amp;st.dla=off&amp;st.exp=1687756017884&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=4040" type="application/x-mpegURL">
        </video>
        <h3 class="title">Capitulo 1</h3>
      </div>
      <div class="vid active">
        <video class="video-js vjs-default-skin" controls muted>
          <source src="https://m.ok.ru/dk/video.m3u8?st.cmd=moviePlaybackRedirect&amp;st.sig=2fa655a1ed5107abef4db7167c4c1a1ad6f15277&amp;st.mq=5&amp;st.mvid=5467125778949&amp;st.ip=186.155.103.151&amp;st.dla=off&amp;st.exp=1687756069810&amp;st.hls=on&amp;_prevCmd=movieLayer&amp;tkn=9416" type="application/x-mpegURL">
        </video>
        <h3 class="title">Capitulo 2</h3>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/video.js/dist/video.js"></script>
  <script src="https://unpkg.com/videojs-contrib-hls/dist/videojs-contrib-hls.js"></script>
  <script>
    // Configurar el reproductor principal
    const mainVideo = videojs('main-video', {
      plugins: {
        contribHls: {
          // Habilitar la carga previa (preloading)
          withCredentials: true,
          // Cantidad de segmentos a descargar por adelante y por detrÃ¡s del tiempo actual
          forwardSegmentCount: 10,
          backSegmentCount: 10
        }
      }
    });

    // Manejar el evento de cambio de video en la lista
    const listVideos = document.querySelectorAll('.video-list .vid');
    listVideos.forEach(video => {
      video.addEventListener('click', function() {
        const src = this.querySelector('video').getAttribute('src');
        const title = this.querySelector('.title').innerHTML;
        mainVideo.src(src);
        mainVideo.poster('');
        mainVideo.title(title);
        mainVideo.currentTime(0);
        listVideos.forEach(video => {
          video.classList.remove('active');
        });
        this.classList.add('active');
      });
    });
  </script>
</body>
</html>
